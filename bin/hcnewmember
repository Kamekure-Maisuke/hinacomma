#!/bin/zsh

set -e

DATA_DIR="$(dirname $0)/../data"

error_and_usage(){
  cat <<EOF
Usage: ${0##*/}
EOF
  exit 1
}

# 引数が1以上ならエラー
[ "$#" -ge 1 ] && error_and_usage

cut -f1 "$DATA_DIR/member_info_all.tsv" |
tr -d '\n' |
iconv -t UCS-2BE |
od -tx1 -An |
sed -e '/^$/d' -e 's/ //g' |
fold -w4 |
grep -Ev '^30' |
while IFS='' read -r line;do echo -e "\u$line"; done |
awk '
BEGIN{
  srand()
}
{
  a[NR]=$1
}
END{
  for(i=1;i<=4;i++){
    printf a[int(rand()*NR+1)]
  }
}'
